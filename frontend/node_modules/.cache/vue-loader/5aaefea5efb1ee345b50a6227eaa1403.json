{"remainingRequest":"L:\\softDev\\personal\\5Chat\\twitterBot\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!L:\\softDev\\personal\\5Chat\\twitterBot\\frontend\\src\\components\\UserSettings.vue?vue&type=script&lang=js&","dependencies":[{"path":"L:\\softDev\\personal\\5Chat\\twitterBot\\frontend\\src\\components\\UserSettings.vue","mtime":1632764840811},{"path":"L:\\softDev\\personal\\5Chat\\twitterBot\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"L:\\softDev\\personal\\5Chat\\twitterBot\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"L:\\softDev\\personal\\5Chat\\twitterBot\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"L:\\softDev\\personal\\5Chat\\twitterBot\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgdXNlclNlcnZpY2VzIGZyb20gIkAvc2VydmljZXMvdXNlclNlcnZpY2VzLmpzIjsNCmltcG9ydCBUd2l0dGVyRGF0YSBmcm9tICJAL2NvbXBvbmVudHMvVHdpdHRlckRhdGEudnVlIjsNCmltcG9ydCBHZW5lcmFsRGF0YSBmcm9tICJAL2NvbXBvbmVudHMvR2VuZXJhbERhdGEudnVlIjsNCmltcG9ydCBGaWx0ZXJzRGF0YSBmcm9tICJAL2NvbXBvbmVudHMvRmlsdGVyc0RhdGEudnVlIjsNCmltcG9ydCBTY29yZURhdGEgZnJvbSAiQC9jb21wb25lbnRzL1Njb3JlRGF0YS52dWUiOw0KdmFyIGpzb253ZWJ0b2tlbiA9IHJlcXVpcmUoImpzb253ZWJ0b2tlbiIpOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiVXNlclNldHRpbmdzIiwNCiAgY29tcG9uZW50czogew0KICAgIFR3aXR0ZXJEYXRhLA0KICAgIEdlbmVyYWxEYXRhLA0KICAgIEZpbHRlcnNEYXRhLA0KICAgIFNjb3JlRGF0YSwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdXNlcm5hbWU6ICIiLA0KICAgICAgaWQ6IG51bGwsDQogICAgICB1c2VyOiBudWxsLA0KICAgICAgand0OiBudWxsLA0KICAgICAgcmVhZEFjY291bnRTdGF0dXM6ICJ1bnRyaWVkIiwNCiAgICAgIGJ1c3k6IGZhbHNlLA0KICAgICAgYnVzeUNyZWF0ZVBvcHVsYXRlOiBmYWxzZSwNCiAgICAgIGJ1c3lTaWduSW46IGZhbHNlLA0KICAgICAgdHdpdHRlcktleTogMCwNCiAgICAgIHRva2VuRXhwaXJlZDogZmFsc2UsDQogICAgICB0b2tlbl9pYXQ6IG51bGwsDQogICAgICB0aW1lbGVmdDogMCwNCiAgICB9Ow0KICB9LA0KICBhc3luYyBjcmVhdGVkKCkgew0KICAgIC8vR2V0dGluZyBpZCBhbmQgdXNlcm5hbWUgZnJvbSBKV1QNCiAgICB0aGlzLmp3dCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpLnNlYXJjaFBhcmFtcy5nZXQoImp3dCIpOw0KICAgIHRyeSB7DQogICAgICBsZXQgZGVjb2RlZCA9IGpzb253ZWJ0b2tlbi5kZWNvZGUodGhpcy5qd3QpOw0KICAgICAgdGhpcy5pZCA9IGRlY29kZWQuYWNjSWQ7DQogICAgICB0aGlzLnVzZXJuYW1lID0gZGVjb2RlZC5hY2NOYW1lOw0KICAgICAgdGhpcy50b2tlbl9pYXQgPSBkZWNvZGVkLmlhdDsNCg0KICAgICAgdGhpcy50aW1lbGVmdCA9IGRlY29kZWQuZXhwIC0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCk7DQoNCiAgICAgIGF3YWl0IHRoaXMuY2FsbFVzZXIoInB1dCIpLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5sb2coImVycm9yID4+ICIsIGVycm9yKSk7DQogICAgICB0aGlzLnJlYWRBY2NvdW50U3RhdHVzID0gInN1Y2Nlc3MiOw0KDQogICAgICAvL1NldHRpbmcgdXAgdGltZXINCiAgICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoDQogICAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBpZiAodGhpcy50aW1lbGVmdCA+IDAgfHwgdGhpcy50aW1lbGVmdCA9PSBudWxsKSB7DQogICAgICAgICAgICB0aGlzLnRpbWVsZWZ0ID0gdGhpcy50aW1lbGVmdCAtIDE7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpOw0KICAgICAgICAgICAgdGhpcy50aW1lbGVmdCA9ICJ0b2tlbiByZXZva2VkLCBzZXNzaW9uIGV4cGlyZWQiOw0KICAgICAgICAgIH0NCiAgICAgICAgfS5iaW5kKHRoaXMpLA0KICAgICAgICAxMDAwLA0KICAgICAgKTsNCiAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgIGNvbnNvbGUubG9nKCJlcnIgOj4+ICIsIGVycik7DQogICAgICB0aGlzLnJlYWRBY2NvdW50U3RhdHVzID0gImZhaWxlZCI7DQogICAgICByZXR1cm4gMTsNCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgdXNlcm5hbWVJc1ZhbGlkOiBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAodGhpcy51c2VybmFtZSAhPSBudWxsICYmIHRoaXMudXNlcm5hbWUubGVuZ3RoID49IDQpIHsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICB9IGVsc2UgaWYgKHRoaXMudXNlcm5hbWUgIT0gbnVsbCkgew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQoNCiAgICAgIHJldHVybiBudWxsOw0KICAgIH0sDQogICAgdHdpdHRlckFjY291bnRTdGF0dXM6IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICh0aGlzLnVzZXIgIT0gbnVsbCAmJiB0aGlzLnVzZXIudHdpdHRlciAhPSBudWxsKSB7DQogICAgICAgIGlmICh0aGlzLnVzZXIuYWNjID09IHVuZGVmaW5lZCkgew0KICAgICAgICAgIHJldHVybiAiZXJyb3JSZWFkaW5nQWNjb3VudCI7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHRoaXMudXNlci50d2l0dGVyLmxpa2VzID09IHVuZGVmaW5lZCkgew0KICAgICAgICAgIHJldHVybiAiYWNjb3VudElzUHJpdmF0ZSI7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuICJyZWFkYWJsZSI7DQogICAgICB9DQogICAgICByZXR1cm4gIm5vdExvYWRlZCI7DQogICAgfSwNCiAgICB1c2VyTGluazogZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuICJodHRwczovL3R3aXR0ZXIuY29tLyIgKyB0aGlzLnVzZXJuYW1lOw0KICAgIH0sDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBhc3luYyBjYWxsVXNlcigpIHsNCiAgICAgIHRoaXMuYnVzeUNyZWF0ZVBvcHVsYXRlID0gdHJ1ZTsNCiAgICAgIGlmICh0aGlzLnVzZXJuYW1lICE9PSBudWxsKSB7DQogICAgICAgIHVzZXJTZXJ2aWNlcw0KICAgICAgICAgIC5nZXRPckNyZWF0ZVVzZXIodGhpcy5qd3QpDQogICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgaWYgKHJlcy5lcnJvciAmJiByZXMuZXJyb3IubmFtZSA9PSAiVG9rZW5FeHBpcmVkRXJyb3IiKSB7DQogICAgICAgICAgICAgIHRoaXMudG9rZW5FeHBpcmVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgYWxlcnQoDQogICAgICAgICAgICAgICAgIlJlcXVlc3QgZmFpbGVkIGJlY2F1c2UgeW91ciBsaW5rIGlzIGV4cGlyZWQsIGFzayBhIG5ldyBvbmUgb3IgY29udGFjdCBtZSBvbiBEaXNjb3JkIGlmIHRoZSBpc3N1ZSBwZXJzaXN0cyIsDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICB9IGVsc2UgaWYgKHJlcykgew0KICAgICAgICAgICAgICB0aGlzLnVzZXIgPSByZXM7DQogICAgICAgICAgICAgIHRoaXMucmVhZEFjY291bnRTdGF0dXMgPSAic3VjY2VzcyI7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICB0aGlzLnJlYWRBY2NvdW50U3RhdHVzID0gImZhaWxlZCI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmJ1c3lDcmVhdGVQb3B1bGF0ZSA9IGZhbHNlOw0KICAgICAgICAgIH0pDQogICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcigiZXJyb3IgOj4+ICIsIGVycm9yKSk7DQogICAgICB9DQogICAgfSwNCiAgICAvKnJlcXVlc3QgdGhlIDVDaGF0IG9hdXRoX3Rva2VuLCB0aGVuIHJlZGlyZWN0cyB0aGUgdXNlciB0byBhIHNpZ24taW4gcGFnZSwNCiAgICBhbmQgZmluYWxseSwgcmV0cmlldmVzIHRoZSB1c2VyIHRva2VucyBhbmQgaUQgZm9yIGxvYWRpbmcqLw0KICAgIGFzeW5jIHVzZXJTaWduSW4oKSB7DQogICAgICBpZiAodGhpcy51c2VyICE9IG51bGwgJiYgdGhpcy51c2VyLnR3aXR0ZXIgIT09IHVuZGVmaW5lZCkgew0KICAgICAgICBsZXQgdXNlcmJsb2NrcyA9IG51bGw7DQogICAgICAgIHRoaXMuYnVzeVNpZ25JbiA9IHRydWU7DQogICAgICAgIGxldCBvYXV0aF90b2tlbiA9IG51bGw7DQoNCiAgICAgICAgbGV0IGFwaVJlcXVlc3RUb2tlbnMgPSBhd2FpdCB1c2VyU2VydmljZXMuZ2V0UmVxdWVzdFRva2VuKHRoaXMuand0KS5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coIltzaWdudXAtcmVxdWVzdHRva2VuXWVyciA6Pj4gIiwgZXJyKTsNCiAgICAgICAgfSk7DQogICAgICAgIGlmIChhcGlSZXF1ZXN0VG9rZW5zLmRhdGEpIHsNCiAgICAgICAgICBpZiAoYXBpUmVxdWVzdFRva2Vucy5kYXRhLmVycm9yICYmIGFwaVJlcXVlc3RUb2tlbnMuZGF0YS5lcnJvci5uYW1lID09ICJUb2tlbkV4cGlyZWRFcnJvciIpIHsNCiAgICAgICAgICAgIHRoaXMudG9rZW5FeHBpcmVkID0gdHJ1ZTsNCiAgICAgICAgICAgIGFsZXJ0KA0KICAgICAgICAgICAgICAiUmVxdWVzdCBmYWlsZWQgYmVjYXVzZSB5b3VyIGxpbmsgaXMgZXhwaXJlZCwgYXNrIGEgbmV3IG9uZSBvciBjb250YWN0IG1lIG9uIERpc2NvcmQgaWYgdGhlIGlzc3VlIHBlcnNpc3RzIiwNCiAgICAgICAgICAgICk7DQogICAgICAgICAgfSBlbHNlIGlmIChhcGlSZXF1ZXN0VG9rZW5zLmRhdGEuZXJyb3IgPT09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgaWYgKGFwaVJlcXVlc3RUb2tlbnMuZGF0YS5zdGF0dXMgPT09ICJVU0VSX0JMT0NLUyIpIHsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2coImFwaVJlcXVlc3RUb2tlbnMuZGF0YS5ibG9ja3MgOj4+ICIsIGFwaVJlcXVlc3RUb2tlbnMuZGF0YS5ibG9ja3MpOw0KICAgICAgICAgICAgICB1c2VyYmxvY2tzID0gYXBpUmVxdWVzdFRva2Vucy5kYXRhLmJsb2NrczsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoYXBpUmVxdWVzdFRva2Vucy5kYXRhLnN0YXR1cyA9PSAiQk9UX1RPS0VOUyIpIHsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2coImFwaVJlcXVlc3RUb2tlbi5kYXRhIDo+PiAiLCBhcGlSZXF1ZXN0VG9rZW5zLmRhdGEpOw0KICAgICAgICAgICAgICBvYXV0aF90b2tlbiA9IGFwaVJlcXVlc3RUb2tlbnMuZGF0YS50b2tlbnMub2F1dGhfdG9rZW47DQoNCiAgICAgICAgICAgICAgLy9JbiB0aGlzIGNhc2UsIHVzZXIgdG9rZW5zIHdlcmVudCBzZXQsIEFQSSByZXR1cm5zIGJvdCB0b2tlbnMgYWxsb3dpbmcgZm9yIHVzZXIgdG9rZW4gYWNjZXNzDQogICAgICAgICAgICAgIGxldCBwYXJhbXMgPSBgc2Nyb2xsYmFycz1ubyxyZXNpemFibGU9bm8sc3RhdHVzPW5vLGxvY2F0aW9uPW5vLHRvb2xiYXI9bm8sbWVudWJhcj1ubywNCndpZHRoPTYwMCxoZWlnaHQ9NzIwLGxlZnQ9MTAwLHRvcD0xMDBgOw0KICAgICAgICAgICAgICBvcGVuKA0KICAgICAgICAgICAgICAgIGBodHRwczovL2FwaS50d2l0dGVyLmNvbS9vYXV0aC9hdXRoZW50aWNhdGU/b2F1dGhfdG9rZW49JHtvYXV0aF90b2tlbn0mc2NyZWVuX25hbWU9JHt0aGlzLnVzZXJuYW1lfSZmb3JjZV9sb2dpbj10cnVlYCwNCiAgICAgICAgICAgICAgICAibG9naW5XaXRoVHdpdHRlciIsDQogICAgICAgICAgICAgICAgcGFyYW1zLA0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAvL1doaWxlIHRoZSB1c2VyIGlzIGFjY2VwdGluZyAvIHJlZnVzaW5nLCBsb29wIGRhdGFiYXNlIHF1ZXJ5IHdhaXRpbmcgZm9yIGFuc3dlci4NCiAgICAgICAgICAgICAgbGV0IGFwaVJlcXVlc3RUb2tlbnNfbG9vcCA9IGF3YWl0IHVzZXJTZXJ2aWNlcy5nZXRSZXF1ZXN0VG9rZW5fbG9vcCh0aGlzLmp3dCkuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJbc2lnbnVwLWxvb3BdIGVyciA6Pj4gIiwgZXJyKTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJhcGlSZXF1ZXN0VG9rZW5zX2xvb3AgcmV0dXJuZWQgOj4+ICIsIGFwaVJlcXVlc3RUb2tlbnNfbG9vcCk7DQogICAgICAgICAgICAgIGlmIChhcGlSZXF1ZXN0VG9rZW5zX2xvb3AuZGF0YSAmJiBhcGlSZXF1ZXN0VG9rZW5zX2xvb3AuZGF0YS5lcnJvcikgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciBvY2N1cmVkIGR1cmluZyBsb29wID0gIiwgYXBpUmVxdWVzdFRva2Vuc19sb29wLmRhdGEubG9vcCk7DQogICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXBpUmVxdWVzdFRva2Vuc19sb29wLmRhdGEuc3RhdHVzID09ICJUSU1FRE9VVCIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgNCiAgICAgICAgICAgICAgICAgICJUd2l0dGVyIFNpZ24gSW4gdGltZWQgb3V0LCBpZiB5b3UgZGVuaWVkIDVDaGF0IHJlYWQgcmlnaHRzLCBpZ25vcmUgdGhpcyB3YXJuaW5nLCBvdGhlcndpc2UsIHRyeSBhZ2FpbiAoZmFzdGVyKSIsDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgfSBlbHNlIGlmIChhcGlSZXF1ZXN0VG9rZW5zX2xvb3AuZGF0YS5zdGF0dXMgPT0gIlVTRVJfQkxPQ0tTIikgew0KICAgICAgICAgICAgICAgIHVzZXJibG9ja3MgPSBhcGlSZXF1ZXN0VG9rZW5zX2xvb3AuZGF0YS5ibG9ja3M7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgY29uc29sZS5sb2coImFwaVJlcXVlc3RUb2tlbnMuZGF0YS5lcnJvciA6Pj4gIiwgYXBpUmVxdWVzdFRva2Vucy5kYXRhLmVycm9yX3RsZHIpOw0KICAgICAgICB9DQogICAgICAgIHRoaXMuYnVzeVNpZ25JbiA9IGZhbHNlOw0KICAgICAgICB0aGlzLnVzZXIudHdpdHRlci5ibG9ja3MgPSB1c2VyYmxvY2tzOw0KICAgICAgICB0aGlzLnR3aXR0ZXJLZXkgKz0gMTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGFsZXJ0KA0KICAgICAgICAgICdXb3VsZCB5b3UgcGxlYXNlIG1pbmQgZW50ZXJpbmcgeW91ciB0d2l0dGVyIEAgYmVmb3JlLCBhbmQgaGl0ICJDcmVhdGUgT3IgUG9wdWxhdGUgVXNlciIgdGhhbmsgdSAod29udCBiZSBpbiBmaW5hbCByZWxlYXNlJywNCiAgICAgICAgKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIHVwZGF0ZVVzZXJEYXRhKHBheWxvYWQpIHsNCiAgICAgIHRoaXMuYnVzeSA9IHRydWU7DQogICAgICB0aGlzLnVzZXJbcGF5bG9hZC5hdHRyaWJ1dGVdID0gcGF5bG9hZC51c2VyRGF0YTsNCiAgICAgIGxldCBwYWNrZXQgPSB7fTsNCiAgICAgIHBhY2tldFtwYXlsb2FkLmF0dHJpYnV0ZV0gPSBwYXlsb2FkLnVzZXJEYXRhOw0KICAgICAgcGFja2V0LmlkID0gdGhpcy5pZDsNCiAgICAgIHVzZXJTZXJ2aWNlcw0KICAgICAgICAucG9zdFVzZXJEYXRhKHRoaXMuand0LCBwYWNrZXQsIHBheWxvYWQuYXR0cmlidXRlKQ0KICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgaWYgKHJlcy5kYXRhICYmIHJlcy5kYXRhLmVycm9yICYmIHJlcy5kYXRhLmVycm9yLm5hbWUgPT0gIlRva2VuRXhwaXJlZEVycm9yIikgew0KICAgICAgICAgICAgdGhpcy50b2tlbkV4cGlyZWQgPSB0cnVlOw0KICAgICAgICAgICAgYWxlcnQoDQogICAgICAgICAgICAgICJSZXF1ZXN0IGZhaWxlZCBiZWNhdXNlIHlvdXIgbGluayBpcyBleHBpcmVkLCBhc2sgYSBuZXcgb25lIG9yIGNvbnRhY3QgbWUgb24gRGlzY29yZCBpZiB0aGUgaXNzdWUgcGVyc2lzdHMiLA0KICAgICAgICAgICAgKTsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5idXN5ID0gZmFsc2U7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoZSkgPT4gew0KICAgICAgICAgIHRoaXMuYnVzeSA9IGZhbHNlOw0KICAgICAgICAgIGNvbnNvbGUubG9nKGUpOw0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIGFzeW5jIGRlbGV0ZU15RGF0YSgpIHsNCiAgICAgIGxldCBkZWxRdWVyeSA9IGF3YWl0IHVzZXJTZXJ2aWNlcw0KICAgICAgICAuZGVsZXRlVXNlcih0aGlzLmp3dCkNCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5sb2coImVycm9yIGRlbGV0aW5nIHVzZXI6Pj4gIiwgZXJyb3IpKTsNCiAgICAgIGlmIChkZWxRdWVyeS5kYXRhLmVycm9yICYmIGRlbFF1ZXJ5LmRhdGEuZXJyb3IubmFtZSA9PSAiVG9rZW5FeHBpcmVkRXJyb3IiKSB7DQogICAgICAgIHRoaXMudG9rZW5FeHBpcmVkID0gdHJ1ZTsNCiAgICAgICAgYWxlcnQoDQogICAgICAgICAgIlJlcXVlc3QgZmFpbGVkIGJlY2F1c2UgeW91ciBsaW5rIGlzIGV4cGlyZWQsIGFzayBhIG5ldyBvbmUgb3IgY29udGFjdCBtZSBvbiBEaXNjb3JkIGlmIHRoZSBpc3N1ZSBwZXJzaXN0cyIsDQogICAgICAgICk7DQogICAgICB9IGVsc2UgaWYgKGRlbFF1ZXJ5LmVycm9yID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAgLy9SZWRpcmVjdCB0byBob21lIHBhZ2UNCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi8iKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGFsZXJ0KCJlcnJvciBkZWxldGluZyB1c2VyIGRhdGEiKTsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["UserSettings.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserSettings.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div id=\"user-settings-compo\">\r\n    <div>\r\n      Session Closes In : <b>{{ timeleft }}</b> seconds\r\n    </div>\r\n    <div style=\"margin: 10px 5px\">\r\n      <div style=\"margin-top: 1rem; max-width: 16rem; display: flex\">\r\n        <b>Account settings for :</b>\r\n        <a id=\"twitter-name\" v-bind:href=\"userLink\" target=\"_blank\"\r\n          ><h1 v-if=\"username !== ''\" style=\"font-size: inherit\">@</h1>\r\n          {{ username }}\r\n        </a>\r\n      </div>\r\n      <div v-if=\"twitterAccountStatus == 'accountIsPrivate'\">This account is private</div>\r\n      <div v-if=\"readAccountStatus == 'failed'\">Error reading account, try again later, report this on Discord !</div>\r\n      <div v-if=\"readAccountStatus == 'notmatching'\">\r\n        User id and user name do not match, if you havent modified the URL, contact me on Discord !\r\n      </div>\r\n      <div style=\"max-width: 15rem; display: flex\">\r\n        <b-button class=\"button-delete\" :disabled=\"busy\" variant=\"outline-danger\" @click=\"deleteMyData\"\r\n          ><span style=\"font-size: small\"> Delete my data </span></b-button\r\n        >\r\n        <transition name=\"load\">\r\n          <div class=\"loading-icon-wraper\">\r\n            <b-icon-twitter animation=\"throb\" v-if=\"busy\"></b-icon-twitter>\r\n          </div>\r\n        </transition>\r\n      </div>\r\n      <p></p>\r\n\r\n      <div class=\"btn-icon-bundle\">\r\n        <input\r\n          :disabled=\"!usernameIsValid\"\r\n          type=\"image\"\r\n          @click=\"userSignIn()\"\r\n          src=\"https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/auth-docs/sign-in-with-twitter-gray.png.twimg.1920.png\"\r\n          alt=\"Twitter Sign In\"\r\n          style=\"width: fit-content; padding: 1rem 0rem\"\r\n        />\r\n        <transition name=\"load\">\r\n          <div class=\"loading-icon-wraper\">\r\n            <b-icon-twitter animation=\"throb\" v-if=\"busySignIn\"></b-icon-twitter>\r\n          </div>\r\n        </transition>\r\n      </div>\r\n      <div v-if=\"twitterKey > 0\">You are signed in !</div>\r\n    </div>\r\n    <p></p>\r\n    <TwitterData :userData=\"user\" :key=\"twitterKey\" />\r\n    <GeneralData :userData=\"user\" v-on:updateUserData=\"updateUserData\" />\r\n    <FiltersData :userData=\"user\" v-on:updateUserData=\"updateUserData\" />\r\n    <ScoreData :userData=\"user\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport userServices from \"@/services/userServices.js\";\r\nimport TwitterData from \"@/components/TwitterData.vue\";\r\nimport GeneralData from \"@/components/GeneralData.vue\";\r\nimport FiltersData from \"@/components/FiltersData.vue\";\r\nimport ScoreData from \"@/components/ScoreData.vue\";\r\nvar jsonwebtoken = require(\"jsonwebtoken\");\r\nexport default {\r\n  name: \"UserSettings\",\r\n  components: {\r\n    TwitterData,\r\n    GeneralData,\r\n    FiltersData,\r\n    ScoreData,\r\n  },\r\n  data() {\r\n    return {\r\n      username: \"\",\r\n      id: null,\r\n      user: null,\r\n      jwt: null,\r\n      readAccountStatus: \"untried\",\r\n      busy: false,\r\n      busyCreatePopulate: false,\r\n      busySignIn: false,\r\n      twitterKey: 0,\r\n      tokenExpired: false,\r\n      token_iat: null,\r\n      timeleft: 0,\r\n    };\r\n  },\r\n  async created() {\r\n    //Getting id and username from JWT\r\n    this.jwt = new URL(window.location.href).searchParams.get(\"jwt\");\r\n    try {\r\n      let decoded = jsonwebtoken.decode(this.jwt);\r\n      this.id = decoded.accId;\r\n      this.username = decoded.accName;\r\n      this.token_iat = decoded.iat;\r\n\r\n      this.timeleft = decoded.exp - Math.floor(Date.now() / 1000);\r\n\r\n      await this.callUser(\"put\").catch((error) => console.log(\"error >> \", error));\r\n      this.readAccountStatus = \"success\";\r\n\r\n      //Setting up timer\r\n      const interval = setInterval(\r\n        function () {\r\n          if (this.timeleft > 0 || this.timeleft == null) {\r\n            this.timeleft = this.timeleft - 1;\r\n          } else {\r\n            clearInterval(interval);\r\n            this.timeleft = \"token revoked, session expired\";\r\n          }\r\n        }.bind(this),\r\n        1000,\r\n      );\r\n    } catch (err) {\r\n      console.log(\"err :>> \", err);\r\n      this.readAccountStatus = \"failed\";\r\n      return 1;\r\n    }\r\n  },\r\n  computed: {\r\n    usernameIsValid: function () {\r\n      if (this.username != null && this.username.length >= 4) {\r\n        return true;\r\n      } else if (this.username != null) {\r\n        return false;\r\n      }\r\n\r\n      return null;\r\n    },\r\n    twitterAccountStatus: function () {\r\n      if (this.user != null && this.user.twitter != null) {\r\n        if (this.user.acc == undefined) {\r\n          return \"errorReadingAccount\";\r\n        }\r\n        if (this.user.twitter.likes == undefined) {\r\n          return \"accountIsPrivate\";\r\n        }\r\n        return \"readable\";\r\n      }\r\n      return \"notLoaded\";\r\n    },\r\n    userLink: function () {\r\n      return \"https://twitter.com/\" + this.username;\r\n    },\r\n  },\r\n  methods: {\r\n    async callUser() {\r\n      this.busyCreatePopulate = true;\r\n      if (this.username !== null) {\r\n        userServices\r\n          .getOrCreateUser(this.jwt)\r\n          .then((res) => {\r\n            if (res.error && res.error.name == \"TokenExpiredError\") {\r\n              this.tokenExpired = true;\r\n              alert(\r\n                \"Request failed because your link is expired, ask a new one or contact me on Discord if the issue persists\",\r\n              );\r\n            } else if (res) {\r\n              this.user = res;\r\n              this.readAccountStatus = \"success\";\r\n            } else {\r\n              this.readAccountStatus = \"failed\";\r\n            }\r\n            this.busyCreatePopulate = false;\r\n          })\r\n          .catch((error) => console.error(\"error :>> \", error));\r\n      }\r\n    },\r\n    /*request the 5Chat oauth_token, then redirects the user to a sign-in page,\r\n    and finally, retrieves the user tokens and iD for loading*/\r\n    async userSignIn() {\r\n      if (this.user != null && this.user.twitter !== undefined) {\r\n        let userblocks = null;\r\n        this.busySignIn = true;\r\n        let oauth_token = null;\r\n\r\n        let apiRequestTokens = await userServices.getRequestToken(this.jwt).catch((err) => {\r\n          console.log(\"[signup-requesttoken]err :>> \", err);\r\n        });\r\n        if (apiRequestTokens.data) {\r\n          if (apiRequestTokens.data.error && apiRequestTokens.data.error.name == \"TokenExpiredError\") {\r\n            this.tokenExpired = true;\r\n            alert(\r\n              \"Request failed because your link is expired, ask a new one or contact me on Discord if the issue persists\",\r\n            );\r\n          } else if (apiRequestTokens.data.error === undefined) {\r\n            if (apiRequestTokens.data.status === \"USER_BLOCKS\") {\r\n              console.log(\"apiRequestTokens.data.blocks :>> \", apiRequestTokens.data.blocks);\r\n              userblocks = apiRequestTokens.data.blocks;\r\n            } else if (apiRequestTokens.data.status == \"BOT_TOKENS\") {\r\n              console.log(\"apiRequestToken.data :>> \", apiRequestTokens.data);\r\n              oauth_token = apiRequestTokens.data.tokens.oauth_token;\r\n\r\n              //In this case, user tokens werent set, API returns bot tokens allowing for user token access\r\n              let params = `scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,\r\nwidth=600,height=720,left=100,top=100`;\r\n              open(\r\n                `https://api.twitter.com/oauth/authenticate?oauth_token=${oauth_token}&screen_name=${this.username}&force_login=true`,\r\n                \"loginWithTwitter\",\r\n                params,\r\n              );\r\n              //While the user is accepting / refusing, loop database query waiting for answer.\r\n              let apiRequestTokens_loop = await userServices.getRequestToken_loop(this.jwt).catch((err) => {\r\n                console.log(\"[signup-loop] err :>> \", err);\r\n              });\r\n              console.log(\"apiRequestTokens_loop returned :>> \", apiRequestTokens_loop);\r\n              if (apiRequestTokens_loop.data && apiRequestTokens_loop.data.error) {\r\n                console.log(\"error occured during loop = \", apiRequestTokens_loop.data.loop);\r\n              } else if (apiRequestTokens_loop.data.status == \"TIMEDOUT\") {\r\n                alert(\r\n                  \"Twitter Sign In timed out, if you denied 5Chat read rights, ignore this warning, otherwise, try again (faster)\",\r\n                );\r\n              } else if (apiRequestTokens_loop.data.status == \"USER_BLOCKS\") {\r\n                userblocks = apiRequestTokens_loop.data.blocks;\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          console.log(\"apiRequestTokens.data.error :>> \", apiRequestTokens.data.error_tldr);\r\n        }\r\n        this.busySignIn = false;\r\n        this.user.twitter.blocks = userblocks;\r\n        this.twitterKey += 1;\r\n      } else {\r\n        alert(\r\n          'Would you please mind entering your twitter @ before, and hit \"Create Or Populate User\" thank u (wont be in final release',\r\n        );\r\n      }\r\n    },\r\n    async updateUserData(payload) {\r\n      this.busy = true;\r\n      this.user[payload.attribute] = payload.userData;\r\n      let packet = {};\r\n      packet[payload.attribute] = payload.userData;\r\n      packet.id = this.id;\r\n      userServices\r\n        .postUserData(this.jwt, packet, payload.attribute)\r\n        .then((res) => {\r\n          if (res.data && res.data.error && res.data.error.name == \"TokenExpiredError\") {\r\n            this.tokenExpired = true;\r\n            alert(\r\n              \"Request failed because your link is expired, ask a new one or contact me on Discord if the issue persists\",\r\n            );\r\n          }\r\n          this.busy = false;\r\n        })\r\n        .catch((e) => {\r\n          this.busy = false;\r\n          console.log(e);\r\n        });\r\n    },\r\n    async deleteMyData() {\r\n      let delQuery = await userServices\r\n        .deleteUser(this.jwt)\r\n        .catch((error) => console.log(\"error deleting user:>> \", error));\r\n      if (delQuery.data.error && delQuery.data.error.name == \"TokenExpiredError\") {\r\n        this.tokenExpired = true;\r\n        alert(\r\n          \"Request failed because your link is expired, ask a new one or contact me on Discord if the issue persists\",\r\n        );\r\n      } else if (delQuery.error === undefined) {\r\n        //Redirect to home page\r\n        this.$router.push(\"/\");\r\n      } else {\r\n        alert(\"error deleting user data\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.btn-icon-bundle {\r\n  display: flex;\r\n\r\n  .load-enter-active,\r\n  .load-leave-active {\r\n    transition: opacity 0.5s;\r\n  }\r\n  .load-enter, .load-leave-to /* .fade-leave-active below version 2.1.8 */ {\r\n    opacity: 0;\r\n  }\r\n\r\n  .loading-icon-wraper {\r\n    padding: 5px;\r\n    align-items: center;\r\n    color: #0d6efd;\r\n    padding-left: 1rem;\r\n    display: flex;\r\n  }\r\n}\r\n\r\n#user-settings-compo {\r\n  display: flex;\r\n  flex-direction: column;\r\n  text-align: left;\r\n  padding: 1.5rem;\r\n}\r\n\r\n.button {\r\n  width: max-content;\r\n}\r\n\r\n.button-delete {\r\n  width: max-content;\r\n  padding: 0rem 0.75rem;\r\n}\r\n\r\n#twitter-name {\r\n  color: rgb(83, 172, 255);\r\n  font-weight: 500;\r\n  text-decoration: none;\r\n  outline: 0 none;\r\n  display: flex;\r\n  flex-direction: row;\r\n  margin-left: 5px;\r\n}\r\n</style>\r\n"]}]}